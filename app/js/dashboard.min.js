var ADMIN={};function toggleMenu(b){var a=document.getElementsByClassName("menu");for(i=0;i<a.length;i++){a[i].style.display="none"}document.getElementById(b).style.display="block"}function deleteImage(b,a){AJAX.get("php/delete_image.php","srcFile="+a,function(c){if(parseInt(c.responseText)){b.nextSibling.className+="fadeOut";setTimeout(function(){b.parentNode.parentNode.removeChild(b.parentNode)},200)}else{console.log(c.responseText);alert("Error deleting image")}})}function uploadFont(){var a=encodeURIComponent(document.getElementById("fontName").value);var b=encodeURIComponent(document.getElementById("fontURL").value);AJAX.get("php/upload_font.php","fontURL="+b+"&fontName="+a,function(c){document.getElementById("echoFontList").innerHTML=c.responseText+document.getElementById("echoFontList").innerHTML;document.getElementById("fontName").value="";document.getElementById("fontURL").value=""})}function addFTPprofile(){var c=encodeURIComponent(document.getElementById("ftpURL").value);var b=encodeURIComponent(document.getElementById("ftpUsr").value);var a=encodeURIComponent(document.getElementById("ftpPwd").value);AJAX.post("php/add_ftp_profile.php","ftpURL="+c+"&ftpUsr="+b+"&ftpPwd="+a,function(d){document.getElementById("echoFTPlist").innerHTML+=d.responseText;document.getElementById("ftpURL").value=document.getElementById("ftpUsr").value=document.getElementById("ftpPwd").value=""})}function deleteTemplate(a,c){if(confirm("Are you sure you want to delete template '"+a+"'?")){var b=document.getElementById("template-"+c);AJAX.post("php/delete_template.php","templateName="+a,function(){b.className+=" fadeOut";setTimeout(function(){b.parentNode.removeChild(b)},200)})}}function menuLinkDetails(a,c){var b=document.getElementById(c);if(b.style.display!="block"){b.style.display="block"}else{b.style.display="none"}}function addBusinessProfile(){var c=encodeURIComponent(document.getElementById("businessID").value);var b=encodeURIComponent(document.getElementById("businessName").value);var a=encodeURIComponent(document.getElementById("businessState").value);var f=encodeURIComponent(document.getElementById("businessCity").value);var j=encodeURIComponent(document.getElementById("businessAddress").value);var g=encodeURIComponent(document.getElementById("businessPostal").value);var l=encodeURIComponent(document.getElementById("businessSandboxID").value);var d=encodeURIComponent(document.getElementById("businessSandboxSecret").value);var h=encodeURIComponent(document.getElementById("businessLiveID").value);var k=encodeURIComponent(document.getElementById("businessLiveSecret").value);var e="id="+c+"&name="+b+"&state="+a+"&city="+f+"&address="+j+"&postal="+g+"&sandboxID="+l+"&sandboxSecret="+d+"&liveID="+h+"&liveSecret="+k;AJAX.post("php/addBusinessProfile.php",e,function(m){closePopUp();location.href="?tab=ecommerce"})}function editBusinessProfile(d,b,e,a,f,j,g,l,c,h,k){openPopUp("newBusinessProfile");document.getElementById("businessID").value=d;document.getElementById("businessName").value=b;document.getElementById("businessState").value=a;document.getElementById("businessCity").value=f;document.getElementById("businessAddress").value=j;document.getElementById("businessPostal").value=g;document.getElementById("businessSandboxID").value=l;document.getElementById("businessSandboxSecret").value=c;document.getElementById("businessLiveID").value=h;document.getElementById("businessLiveSecret").value=k}function deleteBusinessProfile(b,a){var c=document.getElementById("business-"+a);AJAX.post("php/deleteBusinessProfile.php","profileID="+b,function(){c.className+=" fadeOut";setTimeout(function(){c.parentNode.removeChild(c)},400)})}function openPopUp(a){document.getElementById("darkWrapper").style.display="table";document.getElementById(a).style.display="inline-block";document.getElementById("darkWrapper").className="fadeIn"}function closePopUp(){var d=document.getElementById("darkWrapper");d.style.display="none";var e=d.getElementsByClassName("popUpMenu");for(var c=0;c<e.length;c++){e[c].style.display="none"}var a=d.getElementsByTagName("input");for(var c=0;c<a.length;c++){if(!a[c].disabled){a[c].value=""}}var b=d.getElementsByTagName("select");for(var c=0;c<b.length;c++){b[c].selectedIndex=0}}function sortTemplates(c){var b=document.getElementById("myTemplates").querySelectorAll("[user]");for(var a=0;a<b.length;a++){if(c&&!b[a].getAttribute("user").match(c)){b[a].style.display="none"}else{b[a].style.display="block"}}}function checkPassFormat(a){var b=(/[^A-Za-z0-9\!\"\#\$\%\&\'\(\)\*\+\,\-\.\:\;\<\=\>\?\@\[\]\^\_\'\{\|\}\~]/).test(a.value);if(a.value.length<8||b){a.style.border="2px solid red";a.style.backgroundColor="#ffcccc"}else{a.style.border="2px solid green";a.style.backgroundColor="#ccffcc"}}function checkConfirmPass(b){var a=document.getElementById("changePassword");var c=(/[^A-Za-z0-9\!\"\#\$\%\&\'\(\)\*\+\,\-\.\:\;\<\=\>\?\@\[\]\^\_\'\{\|\}\~]/).test(b.value);if(b.value!=a.value||c){b.style.border="2px solid red";b.style.backgroundColor="#ffcccc"}else{b.style.border="2px solid green";b.style.backgroundColor="#ccffcc"}}function changePassword(){var a=document.getElementById("changePassword").value;var c=document.getElementById("changePasswordConfirm").value;var b=document.getElementById("changePasswordError");if(a.length<8){b.innerHTML="*Password must be at least 8 characters"}else{if((/[^A-Za-z0-9\!\"\#\$\%\&\'\(\)\*\+\,\-\.\:\;\<\=\>\?\@\[\]\^\_\'\{\|\}\~]/).test(a)){b.innerHTML="*Passwords may only contain characters A-Z, a-z, 0-9,<br>and these special characters: !  \"  #  $  %  &  '  (  )  *  +  ,  -  .  :  ;  <  =  >  ?  @  [  ]  ^  _  '  {  |  }  ~"}else{if(a===c){var d="password="+a;AJAX.post("php/change_password.php",d,function(e){if(parseInt(e.responseText)!=0){document.getElementById("changePassword").value="";document.getElementById("changePasswordConfirm").value="";document.getElementById("changePasswordSuccess").style.display="block";console.log(e.responseText)}else{b.innerHTML="*Error changing password"}})}else{b.innerHTML="*The password typed does not match the password re-typed for confirmation"}}}}function addImageToList(a){console.log(a);document.getElementById("imageList").innerHTML="<img src='"+a.name+"'>"+document.getElementById("imageList").innerHTML}Dropzone.autoDiscover=false;var myDropzone=new Dropzone("#imageUploadForm");myDropzone.on("complete",function(a){});